# Миграция с CoinGecko API на Moralis SDK

## Изменения

Проект был успешно обновлен для использования Moralis SDK вместо CoinGecko API для получения цен токенов.

### Основные изменения:

1. **Добавлен Moralis SDK** - новая зависимость в `package.json`
2. **Новые функции**:
   - `getTokenPriceFromMoralis(tokenAddress)` - получение цены одного токена
   - `getMultipleTokenPrices(tokenAddresses)` - получение цен нескольких токенов
3. **Обновленные эндпоинты**:
   - `/checkAccount` - теперь использует адреса токенов вместо символов
   - `/tokens` - получение цен через Moralis
   - `/tokengraph` - **ВАЖНО**: теперь принимает `address` вместо `symbol`
   - `/history` - обновлена функция получения цен SOL

### Требования для настройки:

1. **Создайте файл `.env`** на основе `.env.example`
2. **Получите API ключ Moralis**:
   - Зарегистрируйтесь на https://moralis.io/
   - Создайте новый проект
   - Скопируйте API ключ в переменную `MORALIS_API_KEY`

### Важные изменения в API:

#### Эндпоинт `/tokengraph`
**Раньше**: `/tokengraph?symbol=SOL`  
**Теперь**: `/tokengraph?address=So11111111111111111111111111111111111111112`

### Адреса популярных токенов Solana:
- **SOL**: `So11111111111111111111111111111111111111112`
- **USDC**: `EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v`
- **USDT**: `Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB`

### Примечания:

1. **Исторические данные**: В текущей реализации исторические данные генерируются на основе текущих цен для демонстрации. В производственной среде рекомендуется использовать реальные исторические данные.

2. **Кэширование**: Система кэширования сохранена и теперь работает с адресами токенов вместо символов.

3. **Обработка ошибок**: Добавлена обработка ошибок для случаев, когда Moralis не может получить цену токена.

### Запуск:

```bash
npm install
node main.js
```

Убедитесь, что в файле `.env` указан корректный `MORALIS_API_KEY`.